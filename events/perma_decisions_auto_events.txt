namespace = perma_planetery_decisions

planet_event = {
	# add luxury when player gets new planet
	id = perma_planetery_decisions.21
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = { 
				planet_owner = {
					is_ai = no
					has_country_flag = auto_perma_luxury_enabled
					has_monthly_income = {
						resource = consumer_goods
						value > 20  # TODO changable threshold
					}
				}
				free_housing > 1
			}
			planet_event = {
				id = perma_planetery_decisions.1
			}
		}
	}
}

planet_event = {
	# add food when player gets new planet
	id = perma_planetery_decisions.22
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = { 
				planet_owner = {
					is_ai = no
					has_country_flag = auto_perma_food_enabled
					has_monthly_income = {
						resource = food
						value > 20  #  TODO changable threshold
					}
				}
			}
			planet_event = {
				id = perma_planetery_decisions.3
			}
		}
	}
}

planet_event = {
	# Remove perma food when ai gets player's planet
	id = perma_planetery_decisions.23
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = { 
				planet_owner = {
					is_ai = yes
				}
				has_planet_flag = has_perma_food_boost
			}
			planet_event = {
				id = perma_planetery_decisions.13
			}
		}
	}
}

planet_event = {
	# Remove perma luxury when ai gets player's planet
	id = perma_planetery_decisions.24
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = { 
				planet_owner = {
					is_ai = yes
				}
				has_planet_flag = has_perma_luxuries_boost
			}
			planet_event = {
				id = perma_planetery_decisions.11
			}
		}
	}
}

country_event = {
	# Auto set food
	id = perma_planetery_decisions.34
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = { 
				is_ai = no
				has_country_flag = auto_perma_food_enabled
			}
		}
		country_event = {
			id = perma_planetery_decisions.4
		}
	}
}

country_event = {
	# Auto set luxury
	id = perma_planetery_decisions.32
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		if = {
			limit = { 
				is_ai = no
				has_country_flag = auto_perma_luxury_enabled
			}
		}
		country_event = {
			id = perma_planetery_decisions.2
		}
	}
}