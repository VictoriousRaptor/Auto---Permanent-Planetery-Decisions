namespace = perma_planetery_decisions

# Add perma luxury or Update luxury cost
planet_event = {
	id = perma_planetery_decisions.1
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		set_planet_flag = has_perma_luxuries_boost
		remove_modifier = planet_luxuries_boost
		add_modifier = {
			modifier = "planet_luxuries_boost"
		}
		remove_deposit = perma_luxuries_boost_deposit_0
		remove_deposit = perma_luxuries_boost_deposit_1
		remove_deposit = perma_luxuries_boost_deposit_2
		remove_deposit = perma_luxuries_boost_deposit_3
		remove_deposit = perma_luxuries_boost_deposit_4
		remove_deposit = perma_luxuries_boost_deposit_5
		remove_deposit = perma_luxuries_boost_deposit_6
		remove_deposit = perma_luxuries_boost_deposit_7
		remove_deposit = perma_luxuries_boost_deposit_8
		remove_deposit = perma_luxuries_boost_deposit_9

		if = {
  			limit = { num_pops < 10 }
  			add_deposit = perma_luxuries_boost_deposit_0
		}
		else_if = {
  			limit = { num_pops < 20 }
  			add_deposit = perma_luxuries_boost_deposit_1
		}
		else_if = {
  			limit = { num_pops < 30 }
  			add_deposit = perma_luxuries_boost_deposit_2
		}
		else_if = {
  			limit = { num_pops < 40 }
  			add_deposit = perma_luxuries_boost_deposit_3
		}
		else_if = {
  			limit = { num_pops < 50 }
  			add_deposit = perma_luxuries_boost_deposit_4
		}
		else_if = {
  			limit = { num_pops < 60 }
  			add_deposit = perma_luxuries_boost_deposit_5
		}
		else_if = {
  			limit = { num_pops < 70 }
  			add_deposit = perma_luxuries_boost_deposit_6
		}
		else_if = {
  			limit = { num_pops < 85 }
  			add_deposit = perma_luxuries_boost_deposit_7
		}
		else_if = {
  			limit = { num_pops < 100 }
  			add_deposit = perma_luxuries_boost_deposit_8
		}
		else = {
  			add_deposit = perma_luxuries_boost_deposit_9
		}
	}
}

# Update cost on every owned planet
country_event = {
	id = perma_planetery_decisions.2
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		every_owned_planet = {
			if = {
				limit = { has_planet_flag = has_perma_luxuries_boost}
				planet_event = {
					id = perma_planetery_decisions.1  # update cost
				}
			}
		}
	}
}

# Perma food
planet_event = {
	id = perma_planetery_decisions.3
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		add_deposit = perma_food_boost_deposit
		remove_modifier = planet_food_boost
		add_modifier = {
			modifier = "planet_food_boost"
		}
		set_planet_flag = has_perma_food_boost
	}
}

# Remove perma food
planet_event = {
	id = perma_planetery_decisions.13
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		remove_modifier = planet_food_boost
		remove_deposit = perma_food_boost_deposit
		remove_planet_flag = has_perma_food_boost
	}
}

# Remove perma luxury
planet_event = {
	id = perma_planetery_decisions.11
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		remove_modifier = planet_luxuries_boost
		remove_planet_flag = has_perma_luxuries_boost
		remove_deposit = perma_luxuries_boost_deposit_0
		remove_deposit = perma_luxuries_boost_deposit_1
		remove_deposit = perma_luxuries_boost_deposit_2
		remove_deposit = perma_luxuries_boost_deposit_3
		remove_deposit = perma_luxuries_boost_deposit_4
		remove_deposit = perma_luxuries_boost_deposit_5
		remove_deposit = perma_luxuries_boost_deposit_6
		remove_deposit = perma_luxuries_boost_deposit_7
		remove_deposit = perma_luxuries_boost_deposit_8
		remove_deposit = perma_luxuries_boost_deposit_9
	}
}